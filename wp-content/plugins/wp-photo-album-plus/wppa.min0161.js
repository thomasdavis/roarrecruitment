// wppa.js
//
// conatins slideshow, theme, ajax and lightbox code
//
// Version 5.2.5

var wppaVersion='0';var wppaDebug=false;var wppaFullValign=new Array();var wppaFullHalign=new Array();var wppaFullFrameDelta=new Array();var wppaAnimationSpeed;var wppaImageDirectory;var wppaAutoColumnWidth=new Array();var wppaAutoColumnFrac=new Array();var wppaThumbnailAreaDelta;var wppaSlideShowTimeOut=2500;var wppaFadeInAfterFadeOut=false;var wppaTextFrameDelta=0;var wppaBoxDelta=0;var wppaPreambule;var wppaHideWhenEmpty=false;var wppaThumbnailPitch=new Array();var wppaFilmStripLength=new Array();var wppaFilmStripMargin=new Array();var wppaFilmStripAreaDelta=new Array();var wppaFilmShowGlue=false;var wppaIsMini=new Array();var wppaPortraitOnly=new Array();var wppaSlideShow;var wppaPhoto;var wppaOf;var wppaNextPhoto;var wppaPreviousPhoto;var wppaSlower;var wppaFaster;var wppaNextP;var wppaPrevP;var wppaAvgRating;var wppaMyRating;var wppaAvgRat;var wppaMyRat;var wppaDislikeMsg;var wppaShowDislikeCount=false;var wppaNoDislikes='no dislikes';var wppa1Dislike='1 dislike';var wppaDislikes='dislikes';var wppaIncludingMine='including mine';var wppaMiniTreshold=300;var wppaStart='Start';var wppaStop='Stop';var wppaPleaseName;var wppaPleaseEmail;var wppaPleaseComment;var wppaRatingOnce=true;var wppaUserName;var wppaBGcolorNumbar='transparent';var wppaBcolorNumbar='transparent';var wppaBGcolorNumbarActive='transparent';var wppaBcolorNumbarActive='transparent';var wppaFontFamilyNumbar='';var wppaFontSizeNumbar='';var wppaFontColorNumbar='';var wppaFontWeightNumbar='';var wppaFontFamilyNumbarActive='';var wppaFontSizeNumbarActive='';var wppaFontColorNumbarActive='';var wppaFontWeightNumbarActive='';var wppaNumbarMax='10';var wppaAjaxUrl='';var wppaLang='';var wppaNextOnCallback=false;var wppaRatingUseAjax=false;var wppaStarOpacity=0.2;var wppaTickImg=new Image();var wppaClockImg=new Image();var wppaSlideWrap=true;var wppaLightBox='';var wppaEmailRequired=true;var wppaSlideBorderWidth=0;var wppaSlideInitRunning=new Array();var wppaAnimationType='fadeover';var wppaSlidePause=new Array();var wppaSlideBlank=new Array();var wppaRatingMax=5;var wppaRatingDisplayType='graphic';var wppaRatingPrec=2;var wppaFilmPageSize=new Array();var wppaAspectRatio=new Array();var wppaFullSize=new Array();var wppaStretch=false;var wppaThumbSpaceAuto=false;var wppaMinThumbSpace=4;var wppaMagnifierCursor='';var wppaArtMonkyLink='none';var wppaAutoOpenComments=false;var wppaUpdateAddressLine=false;var wppaFilmThumbTitle='';var wppaUploadUrl='';var wppaVoteForMe='';var wppaVotedForMe='';var wppaSlideSwipe=true;var wppaLightboxSingle=false;var wppaMaxCoverWidth=300;var wppaDownLoad='Download';var wppaSiteUrl='';var wppaSlideToFullpopup=false;var wppaComAltSize=75;var wppaBumpViewCount=true;var _wppaId=new Array();var _wppaAvg=new Array();var _wppaDisc=new Array();var _wppaMyr=new Array();var _wppaVRU=new Array();var _wppaLinkUrl=new Array();var _wppaLinkTitle=new Array();var _wppaLinkTarget=new Array();var _wppaCommentHtml=new Array();var _wppaIptcHtml=new Array();var _wppaExifHtml=new Array();var _wppaToTheSame=false;var _wppaSlides=new Array();var _wppaNames=new Array();var _wppaFullNames=new Array();var _wppaDsc=new Array();var _wppaOgDsc=new Array();var _wppaCurIdx=new Array();var _wppaNxtIdx=new Array();var _wppaTimeOut=new Array();var _wppaSSRuns=new Array();var _wppaFg=new Array();var _wppaTP=new Array();var _wppaIsBusy=new Array();var _wppaFirst=new Array();var _wppaVIP=false;var _wppaTextDelay;var _wppaUrl=new Array();var _wppaLastVote=0;var _wppaSkipRated=new Array();var _wppaLbTitle=new Array();var _wppaStateCount=0;var _wppaDidGoto=new Array();var wppaTopMoc=0;var wppaColWidth=new Array();var _wppaShareUrl=new Array();var _wppaShareHtml=new Array();var _wppaFilmNoMove=new Array();jQuery(document).ready(function(){for(mocc=1;mocc<=wppaTopMoc;mocc++){if(wppaAutoColumnWidth[mocc]){wppaColWidth[mocc]=0;_wppaDoAutocol(mocc);}}
_wppaTextDelay=wppaAnimationSpeed;if(wppaFadeInAfterFadeOut)_wppaTextDelay*=2;});function wppaStoreSlideInfo(mocc,id,url,size,width,height,fullname,name,desc,photoid,avgrat,discount,myrat,rateurl,linkurl,linktitle,linktarget,iwtimeout,commenthtml,iptchtml,exifhtml,lbtitle,shareurl,smhtml,ogdsc){var cursor;desc=wppaRepairScriptTags(desc);if(!_wppaSlides[mocc]||id=='0'){_wppaSlides[mocc]=new Array();_wppaNames[mocc]=new Array();_wppaFullNames[mocc]=new Array();_wppaDsc[mocc]=new Array();_wppaOgDsc[mocc]=new Array();_wppaCurIdx[mocc]=-1;_wppaNxtIdx[mocc]=0;if(parseInt(iwtimeout)>0)_wppaTimeOut[mocc]=parseInt(iwtimeout);else _wppaTimeOut[mocc]=wppaSlideShowTimeOut;_wppaSSRuns[mocc]=false;_wppaTP[mocc]=-2;_wppaFg[mocc]=0;_wppaIsBusy[mocc]=false;_wppaFirst[mocc]=true;_wppaId[mocc]=new Array();_wppaAvg[mocc]=new Array();_wppaDisc[mocc]=new Array();_wppaMyr[mocc]=new Array();_wppaVRU[mocc]=new Array();_wppaLinkUrl[mocc]=new Array();_wppaLinkTitle[mocc]=new Array();_wppaLinkTarget[mocc]=new Array();_wppaCommentHtml[mocc]=new Array();_wppaIptcHtml[mocc]=new Array();_wppaExifHtml[mocc]=new Array();_wppaUrl[mocc]=new Array();_wppaSkipRated[mocc]=false;_wppaLbTitle[mocc]=new Array();_wppaDidGoto[mocc]=false;wppaSlidePause[mocc]=false;_wppaShareUrl[mocc]=new Array();_wppaShareHtml[mocc]=new Array();_wppaFilmNoMove[mocc]=false;}
cursor='default';if(linkurl!='')cursor='pointer';else if(wppaLightBox=='wppa')cursor='url('+wppaImageDirectory+wppaMagnifierCursor+'),pointer';_wppaSlides[mocc][id]=' src="'+url+'" alt="'+wppaTrimAlt(name)+'" class="theimg theimg-'+mocc+' big" ';if(wppaSlideSwipe){_wppaSlides[mocc][id]+='ontouchstart="wppaTouchStart(event, this.id, '+mocc+');"  ontouchend="wppaTouchEnd(event);" ontouchmove="wppaTouchMove(event);" ontouchcancel="wppaTouchCancel(event);" ';}
if(!wppaAutoColumnWidth[mocc])_wppaSlides[mocc][id]+='width="'+width+'" height="'+height+'" ';_wppaSlides[mocc][id]+='style="'+size+'; cursor:'+cursor+'; display:none;">';_wppaFullNames[mocc][id]=fullname;_wppaNames[mocc][id]=name;_wppaDsc[mocc][id]=desc;_wppaOgDsc[mocc][id]=ogdsc;_wppaId[mocc][id]=photoid;_wppaAvg[mocc][id]=avgrat;_wppaDisc[mocc][id]=discount;_wppaMyr[mocc][id]=myrat;_wppaVRU[mocc][id]=rateurl;_wppaLinkUrl[mocc][id]=linkurl;_wppaLinkTitle[mocc][id]=linktitle;if(linktarget!='')_wppaLinkTarget[mocc][id]=linktarget;else if(wppaSlideBlank[mocc])_wppaLinkTarget[mocc][id]='_blank';else _wppaLinkTarget[mocc][id]='_self';_wppaCommentHtml[mocc][id]=commenthtml;_wppaIptcHtml[mocc][id]=iptchtml;_wppaExifHtml[mocc][id]=exifhtml;_wppaUrl[mocc][id]=url;_wppaLbTitle[mocc][id]=lbtitle;_wppaShareUrl[mocc][id]=shareurl;_wppaShareHtml[mocc][id]=wppaRepairScriptTags(smhtml);}
function wppaSpeed(mocc,faster){if(_wppaSSRuns[mocc]){_wppaSpeed(mocc,faster);}}
function wppaStopShow(mocc){if(_wppaSSRuns[mocc]){_wppaStop(mocc);}}
function wppaStartStop(mocc,index){if(_wppaIsBusy[mocc]){_wppaTP[mocc]=index;}
else{if(_wppaSSRuns[mocc]){_wppaStop(mocc);}
else{_wppaStart(mocc,index);}}}
function wppaBbb(mocc,where,act){if(!_wppaSSRuns[mocc]){_wppaBbb(mocc,where,act);}}
function wppaRateIt(mocc,value){_wppaRateIt(mocc,value);}
function wppaPrev(mocc){_wppaDidGoto[mocc]=true;if(!_wppaSSRuns[mocc]){_wppaPrev(mocc);}}
function wppaPrevN(mocc,n){_wppaDidGoto[mocc]=true;if(!_wppaSSRuns[mocc]){_wppaPrevN(mocc,n);}}
function wppaNext(mocc){_wppaDidGoto[mocc]=true;if(!_wppaSSRuns[mocc]){_wppaNext(mocc);}}
function wppaNextN(mocc,n){_wppaDidGoto[mocc]=true;if(!_wppaSSRuns[mocc]){_wppaNextN(mocc,n);}}
function wppaFollowMe(mocc,idx){if(!_wppaSSRuns[mocc]){_wppaFollowMe(mocc,idx);}}
function wppaLeaveMe(mocc,idx){if(!_wppaSSRuns[mocc]){_wppaLeaveMe(mocc,idx);}}
function wppaGoto(mocc,idx){_wppaDidGoto[mocc]=true;if(!_wppaSSRuns[mocc]){_wppaGoto(mocc,idx);}}
function wppaGotoFilmNoMove(mocc,idx){_wppaDidGoto[mocc]=true;if(!_wppaSSRuns[mocc]){_wppaFilmNoMove[mocc]=true;_wppaGoto(mocc,idx);}}
function wppaGotoKeepState(mocc,idx){_wppaDidGoto[mocc]=true;_wppaGotoKeepState(mocc,idx);}
function _wppaGotoKeepState(mocc,idx){if(_wppaSSRuns[mocc]){_wppaGotoRunning(mocc,idx);}
else{_wppaGoto(mocc,idx);}}
function wppaGotoRunning(mocc,idx){_wppaDidGoto[mocc]=true;_wppaGotoRunning(mocc,idx);}
function wppaValidateComment(mocc){return _wppaValidateComment(mocc);}
function _wppaNextSlide(mocc,mode){var fg=_wppaFg[mocc];var bg=1-fg;if(mode=='auto'){if(wppaSlidePause[mocc]){jQuery('#theimg'+fg+'-'+mocc).attr("title",wppaSlidePause[mocc]);setTimeout('_wppaNextSlide('+mocc+', "auto")',250);return;}}
if(!_wppaSSRuns[mocc]&&mode=='auto')return;if(!_wppaSlides[mocc])return;if(_wppaSlides[mocc].length<2&&!_wppaFirst[mocc])return;if(!_wppaSSRuns[mocc]&&mode=='reset')_wppaSSRuns[mocc]=true;_wppaVIP=false;_wppaIsBusy[mocc]=true;if(_wppaSSRuns[mocc])_wppaShowMetaData(mocc,'hide');if(_wppaSSRuns[mocc]){_wppaNxtIdx[mocc]=_wppaCurIdx[mocc]+1;if(_wppaNxtIdx[mocc]==_wppaSlides[mocc].length)_wppaNxtIdx[mocc]=0;}
jQuery('#geodiv-'+mocc+'-'+_wppaId[mocc][_wppaCurIdx[mocc]]).css({display:'none'});jQuery('#geodiv-'+mocc+'-'+_wppaId[mocc][_wppaNxtIdx[mocc]]).css({display:''});jQuery('[id^=wppa-numbar-'+mocc+'-]').css({backgroundColor:wppaBGcolorNumbar,borderColor:wppaBcolorNumbar,fontFamily:wppaFontFamilyNumbar,fontSize:wppaFontSizeNumbar,color:wppaFontColorNumbar,fontWeight:wppaFontWeightNumbar});jQuery("#wppa-numbar-"+mocc+"-"+_wppaNxtIdx[mocc]).css({backgroundColor:wppaBGcolorNumbarActive,borderColor:wppaBcolorNumbarActive,fontFamily:wppaFontFamilyNumbarActive,fontSize:wppaFontSizeNumbarActive,color:wppaFontColorNumbarActive,fontWeight:wppaFontWeightNumbarActive});if(_wppaSlides[mocc].length>wppaNumbarMax){jQuery('[id^=wppa-numbar-'+mocc+'-]').html(' . ');jQuery("#wppa-numbar-"+mocc+"-"+_wppaNxtIdx[mocc]).html(' '+(_wppaNxtIdx[mocc]+1)+' ');}
if(_wppaFirst[mocc]){if(_wppaCurIdx[mocc]!=-1){wppaMakeTheSlideHtml(mocc,'0',_wppaCurIdx[mocc]);}
wppaMakeTheSlideHtml(mocc,'1',_wppaNxtIdx[mocc]);jQuery("#imagedesc-"+mocc).html(_wppaDsc[mocc][_wppaCurIdx[mocc]]);jQuery("#imagetitle-"+mocc).html(wppaMakeNameHtml(mocc));jQuery("#wppa-comments-"+mocc).html(_wppaCommentHtml[mocc][_wppaCurIdx[mocc]]);jQuery("#iptc-"+mocc).html(_wppaIptcHtml[mocc][_wppaCurIdx[mocc]]);jQuery("#exif-"+mocc).html(_wppaExifHtml[mocc][_wppaCurIdx[mocc]]);if(wppaIsMini[mocc]||wppaGetContainerWidth(mocc)<wppaMiniTreshold){jQuery('#prev-arrow-'+mocc).html(wppaPrevP);jQuery('#next-arrow-'+mocc).html(wppaNextP);jQuery('#wppa-avg-rat-'+mocc).html(wppaAvgRat);jQuery('#wppa-my-rat-'+mocc).html(wppaMyRat);}
else{jQuery('#prev-arrow-'+mocc).html(wppaPreviousPhoto);jQuery('#next-arrow-'+mocc).html(wppaNextPhoto);jQuery('#wppa-avg-rat-'+mocc).html(wppaAvgRating);jQuery('#wppa-my-rat-'+mocc).html(wppaMyRating);}}
else{wppaMakeTheSlideHtml(mocc,bg,_wppaNxtIdx[mocc]);}
_wppaLoadSpinner(mocc);_wppaFirst[mocc]=false;_wppaCheckRewind(mocc);wppaColWidth[mocc]=0;setTimeout('_wppaNextSlide_2('+mocc+')',10);}
function _wppaNextSlide_2(mocc){var fg,bg;fg=_wppaFg[mocc];bg=1-fg;if(document.getElementById('theimg'+bg+"-"+mocc)){if(!document.getElementById('theimg'+bg+"-"+mocc).complete){setTimeout('_wppaNextSlide_2('+mocc+')',100);return;}}
wppaUpdateLightboxes();_wppaUnloadSpinner(mocc);if(_wppaSSRuns[mocc]!=-1){if(!_wppaToTheSame){_wppaShowMetaData(mocc,'hide');}}
_wppaFg[mocc]=1-_wppaFg[mocc];fg=_wppaFg[mocc];bg=1-fg;setTimeout('_wppaNextSlide_3('+mocc+')',10);}
function _wppaNextSlide_3(mocc){var nw=_wppaFg[mocc];var ol=1-nw;var olIdx=_wppaCurIdx[mocc];var nwIdx=_wppaNxtIdx[mocc];var olSli="#theslide"+ol+"-"+mocc;var nwSli="#theslide"+nw+"-"+mocc;var olImg="#theimg"+ol+"-"+mocc;var nwImg="#theimg"+nw+"-"+mocc;var w=parseInt(jQuery(olSli).css('width'));var dir='nil';if(olIdx==nwIdx)dir='none';if(olIdx==nwIdx-1)dir='left';if(olIdx==nwIdx+1)dir='right';if(olIdx==_wppaSlides[mocc].length-1&&nwIdx==0&&wppaSlideWrap)dir='left';if(olIdx==0&&nwIdx==_wppaSlides[mocc].length-1&&wppaSlideWrap)dir='right';if(dir=='nil'){if(olIdx<nwIdx)dir='left';else dir='right';}
jQuery(olSli).css({marginLeft:0,width:w});jQuery(nwSli).css({marginLeft:0,width:w});wppaFormatSlide(mocc);switch(wppaAnimationType){case'fadeover':jQuery(olImg).fadeOut(wppaAnimationSpeed);jQuery(nwImg).fadeIn(wppaAnimationSpeed,_wppaNextSlide_4(mocc));break;case'fadeafter':jQuery(olImg).fadeOut(wppaAnimationSpeed);jQuery(nwImg).delay(wppaAnimationSpeed).fadeIn(wppaAnimationSpeed,_wppaNextSlide_4(mocc));break;case'swipe':switch(dir){case'left':jQuery(olSli).animate({marginLeft:-w+"px"},wppaAnimationSpeed,"swing");jQuery(nwSli).css({marginLeft:w+"px"});jQuery(nwImg).fadeIn(10);jQuery(nwSli).animate({marginLeft:0+"px"},wppaAnimationSpeed,"swing",_wppaNextSlide_4(mocc));break;case'right':jQuery(olSli).animate({marginLeft:w+"px"},wppaAnimationSpeed,"swing");jQuery(nwSli).css({marginLeft:-w+"px"});jQuery(nwImg).fadeIn(10);jQuery(nwSli).animate({marginLeft:0+"px"},wppaAnimationSpeed,"swing",_wppaNextSlide_4(mocc));break;case'none':jQuery(nwImg).fadeIn(10);setTimeout('_wppaNextSlide_4('+mocc+')',10);break;}
break;case'stackon':switch(dir){case'left':jQuery(olSli).css({zIndex:80});jQuery(nwSli).css({marginLeft:w+"px",zIndex:81});jQuery(nwImg).fadeIn(10);jQuery(olImg).delay(wppaAnimationSpeed).fadeOut(10);jQuery(nwSli).animate({marginLeft:0+"px"},wppaAnimationSpeed,"swing",_wppaNextSlide_4(mocc));break;case'right':jQuery(olSli).css({zIndex:80});jQuery(nwSli).css({marginLeft:-w+"px",zIndex:81});jQuery(nwImg).fadeIn(10);jQuery(olImg).delay(wppaAnimationSpeed).fadeOut(10);jQuery(nwSli).animate({marginLeft:0+"px"},wppaAnimationSpeed,"swing",_wppaNextSlide_4(mocc));break;case'none':jQuery(nwImg).fadeIn(10);setTimeout('_wppaNextSlide_4('+mocc+')',10);break;}
break;case'stackoff':switch(dir){case'left':jQuery(olSli).css({marginLeft:0,zIndex:81});jQuery(olSli).animate({marginLeft:-w+"px"},wppaAnimationSpeed,"swing",_wppaNextSlide_4(mocc));jQuery(nwSli).css({marginLeft:0,zIndex:80});jQuery(nwImg).fadeIn(10);jQuery(olImg).delay(wppaAnimationSpeed).fadeOut(10);break;case'right':jQuery(olSli).css({marginLeft:0,zIndex:81});jQuery(olSli).animate({marginLeft:w+"px"},wppaAnimationSpeed,"swing",_wppaNextSlide_4(mocc));jQuery(nwSli).css({marginLeft:0,zIndex:80});jQuery(nwImg).fadeIn(10);jQuery(olImg).delay(wppaAnimationSpeed).fadeOut(10);break;case'none':jQuery(nwImg).fadeIn(10);setTimeout('_wppaNextSlide_4('+mocc+')',10);break;}
break;case'turnover':switch(dir){case'left':case'right':var nwImgWid=parseInt(jQuery(nwSli).css('width'));var nwMarLft=parseInt(jQuery(nwImg).css('marginLeft'));jQuery(olSli).css({zIndex:80});jQuery(nwSli).css({zIndex:81,width:0});jQuery(nwImg).css({maxWidth:0,marginLeft:0});jQuery(nwImg).fadeIn(10);jQuery(nwSli).animate({width:w},wppaAnimationSpeed,"swing");jQuery(nwImg).animate({maxWidth:nwImgWid,marginLeft:nwMarLft},wppaAnimationSpeed,"swing",_wppaNextSlide_4(mocc));jQuery(olImg).delay(wppaAnimationSpeed).fadeOut(10);break;case'none':jQuery(nwImg).fadeIn(10);setTimeout('_wppaNextSlide_4('+mocc+')',10);break;}
break;default:alert('Animation type '+wppaAnimationType+' is not supported in this version');}}
function _wppaNextSlide_4(mocc){var nw=_wppaFg[mocc];var ol=1-nw;var olSli="#theslide"+ol+"-"+mocc;var nwSli="#theslide"+nw+"-"+mocc;jQuery(olSli).css({zIndex:80});jQuery(nwSli).css({zIndex:81});_wppaCurIdx[mocc]=_wppaNxtIdx[mocc];wppaFormatSlide(mocc);if(wppaIsMini[mocc]||wppaGetContainerWidth(mocc)<wppaMiniTreshold){jQuery('#counter-'+mocc).html((_wppaCurIdx[mocc]+1)+' / '+_wppaSlides[mocc].length);}
else{jQuery('#counter-'+mocc).html(wppaPhoto+' '+(_wppaCurIdx[mocc]+1)+' '+wppaOf+' '+_wppaSlides[mocc].length);}
jQuery('#bc-pname-'+mocc).html(_wppaNames[mocc][_wppaCurIdx[mocc]]);_wppaAdjustFilmstrip(mocc);_wppaSetRatingDisplay(mocc);_wppaUpdateOgMeta(mocc);setTimeout('_wppaNextSlide_5('+mocc+')',_wppaTextDelay);}
function _wppaNextSlide_5(mocc){if(!_wppaToTheSame){jQuery('#imagedesc-'+mocc).html(_wppaDsc[mocc][_wppaCurIdx[mocc]]);if(wppaHideWhenEmpty){if(_wppaDsc[mocc][_wppaCurIdx[mocc]]==''||_wppaDsc[mocc][_wppaCurIdx[mocc]]=='&nbsp;')jQuery('#descbox-'+mocc).css('display','none');else jQuery('#descbox-'+mocc).css('display','');}
jQuery("#imagetitle-"+mocc).html(wppaMakeNameHtml(mocc));jQuery("#wppa-comments-"+mocc).html(_wppaCommentHtml[mocc][_wppaCurIdx[mocc]]);jQuery("#iptc-"+mocc).html(_wppaIptcHtml[mocc][_wppaCurIdx[mocc]]);jQuery("#exif-"+mocc).html(_wppaExifHtml[mocc][_wppaCurIdx[mocc]]);jQuery("#share-"+mocc).html(_wppaShareHtml[mocc][_wppaCurIdx[mocc]]);}
_wppaToTheSame=false;if(_wppaSSRuns[mocc]&&!wppaSlideWrap&&((_wppaCurIdx[mocc]+1)==_wppaSlides[mocc].length)){_wppaIsBusy[mocc]=false;_wppaStop(mocc);return;}
_wppaShowMetaData(mocc,'show');if(_wppaTP[mocc]!=-2){var index=_wppaTP[mocc];_wppaTP[mocc]=-2;wppaStartStop(mocc,index);}
else{wppaUpdateLightboxes();if(!wppaIsMini[mocc]){var visurl=wppaGetCurrentFullUrl(mocc,_wppaCurIdx[mocc]);if(visurl=='')visurl=_wppaShareUrl[mocc][_wppaCurIdx[mocc]];if(typeof(wppaQRUpdate)!='undefined')wppaQRUpdate(_wppaShareUrl[mocc][_wppaCurIdx[mocc]]);if(!_wppaSSRuns[mocc]){wppaPushStateSlide(mocc,_wppaCurIdx[mocc],visurl);}}
if(_wppaSSRuns[mocc]){setTimeout('_wppaNextSlide('+mocc+', "auto")',_wppaTimeOut[mocc]);}}
_wppaDidGoto[mocc]=false;_wppaIsBusy[mocc]=false;if(!wppaIsMini[mocc]){_bumpViewCount(_wppaId[mocc][_wppaCurIdx[mocc]]);}}
function wppaMakeNameHtml(mocc){var result;switch(wppaArtMonkyLink){case'file':case'zip':result='<input type="button" title="Download" style="cursor:pointer; margin-bottom:0px;" class="wppa-download-button" onclick="wppaAjaxMakeOrigName('+mocc+', '+_wppaId[mocc][_wppaCurIdx[mocc]]+');" value="'+wppaDownLoad+': '+_wppaFullNames[mocc][_wppaCurIdx[mocc]]+'" />';break;case'none':result=_wppaFullNames[mocc][_wppaCurIdx[mocc]];break;}
return result;}
function wppaMakeTheSlideHtml(mocc,bgfg,idx){if(_wppaLinkUrl[mocc][idx]!=''){if(wppaSlideToFullpopup){jQuery("#theslide"+bgfg+"-"+mocc).html('<a onclick="'+_wppaLinkUrl[mocc][idx]+'" target="'+_wppaLinkTarget[mocc][idx]+'" title="'+_wppaLinkTitle[mocc][idx]+'">'+'<img title="'+_wppaLinkTitle[mocc][idx]+'" id="theimg'+bgfg+'-'+mocc+'" '+_wppaSlides[mocc][idx]+'</a>');}
else{jQuery("#theslide"+bgfg+"-"+mocc).html('<a href="'+_wppaLinkUrl[mocc][idx]+'" target="'+_wppaLinkTarget[mocc][idx]+'" title="'+_wppaLinkTitle[mocc][idx]+'">'+'<img title="'+_wppaLinkTitle[mocc][idx]+'" id="theimg'+bgfg+'-'+mocc+'" '+_wppaSlides[mocc][idx]+'</a>');}}
else{if(wppaLightBox==''){jQuery("#theslide"+bgfg+"-"+mocc).html('<img title="'+_wppaNames[mocc][idx]+'" id="theimg'+bgfg+'-'+mocc+'" '+_wppaSlides[mocc][idx]);}
else{var html='';var i=0;var set=wppaLightboxSingle?'':'[slide-'+mocc+'-'+bgfg+']';if(wppaLightBox=='wppa'){while(i<idx){url=wppaMakeFullsizeUrl(_wppaUrl[mocc][i]);html+='<a href="'+url+'" title="'+_wppaLbTitle[mocc][i]+'" rel="'+wppaLightBox+set+'"></a>';i++;}}
var url=wppaMakeFullsizeUrl(_wppaUrl[mocc][idx]);html+='<a href="'+url+'" target="'+_wppaLinkTarget[mocc][idx]+'" title="'+_wppaLbTitle[mocc][idx]+'" rel="'+wppaLightBox+set+'">'+'<img title="'+_wppaLinkTitle[mocc][idx]+'" id="theimg'+bgfg+'-'+mocc+'" '+_wppaSlides[mocc][idx]+'</a>';if(wppaLightBox=='wppa'){i=idx+1;while(i<_wppaUrl[mocc].length){var url=wppaMakeFullsizeUrl(_wppaUrl[mocc][i]);html+='<a href="'+url+'" title="'+_wppaLbTitle[mocc][i]+'" rel="'+wppaLightBox+set+'"></a>';i++;}}
jQuery("#theslide"+bgfg+"-"+mocc).html(html);}}}
function wppaMakeFullsizeUrl(url){url=url.replace('/thumbs/','/');var temp=url.split('//');var temp2=temp[1].split('/');url=temp[0]+'/';var j=0;while(j<temp2.length){var chunk=temp2[j];var w=chunk.split('_');if(w[0]!='w')url+='/'+chunk;j++;}
return url;}
function wppaFormatSlide(mocc){var imgid='theimg'+_wppaFg[mocc]+'-'+mocc;var slideid='theslide'+_wppaFg[mocc]+'-'+mocc;var frameid='slide_frame-'+mocc;var contw=wppaColWidth[mocc];var elm=document.getElementById(imgid);if(!elm)return;if(typeof(contw)=='undefined'||contw==0){contw=wppaGetContainerWidth(mocc);wppaColWidth[mocc]=contw;}
var natwidth=elm.naturalWidth;if(typeof(natwidth)=='undefined')natwidth=parseInt(elm.style.maxWidth);var natheight=elm.naturalHeight;if(typeof(natheight)=='undefined')natheight=parseInt(elm.style.maxHeight);var aspect=wppaAspectRatio[mocc];var fullsize=wppaFullSize[mocc];var delta=wppaFullFrameDelta[mocc];var ponly=wppaPortraitOnly[mocc];var valign=wppaFullValign[mocc];if(typeof(valign)=='undefined')valign='none';var halign=wppaFullHalign[mocc];if(typeof(halign)=='undefined')halign='none';var stretch=wppaStretch;var imgw,imgh;var margl,margt;var slidew,slideh;var framew,frameh;if(ponly){imgw=contw-delta;imgh=parseInt(imgw*natheight/natwidth);margl=0;margt=0;slidew=contw;slideh=imgh+delta;framew=contw;frameh=slideh;jQuery('#'+frameid).css({width:framew,height:frameh});jQuery('#'+slideid).css({width:slidew,height:slideh});jQuery('#'+imgid).css({width:imgw,height:imgh});}
else{framew=contw;if(fullsize<contw){framew=fullsize;}
frameh=parseInt(framew*aspect);slidew=framew;slideh=frameh;if(stretch||natwidth>=(framew-delta)||natheight>=(frameh-delta)){if(((natheight+delta)/(natwidth+delta))>aspect){imgh=frameh-delta;imgw=parseInt(imgh*natwidth/natheight);}
else{imgw=framew-delta;imgh=parseInt(imgw*natheight/natwidth);}}
else{imgw=natwidth;imgh=natheight;}
if(valign!='default'&&valign!='none'){switch(valign){case'top':margt=0;break;case'center':margt=parseInt((frameh-(imgh+delta))/2);break;case'bottom':margt=frameh-(imgh+delta);break;case'fit':margt=0;frameh=imgh+delta;slideh=imgh+delta;break;default:}
jQuery('#'+imgid).css({marginTop:margt,marginBottom:0});}
jQuery('#'+frameid).css({width:framew,height:frameh});jQuery('#'+slideid).css({width:slidew,height:slideh});jQuery('#'+imgid).css({width:imgw,height:imgh});if(valign!='default'&&valign!='none'&&halign!='none'&&halign!='default'){switch(halign){case'left':margl=0;break;case'center':margl=parseInt((contw-framew)/2);break;case'right':margl=contw-framew;break;default:}
if(margl<0)margl=0;jQuery('#'+imgid).css({marginLeft:'auto',marginRight:'auto'});jQuery('#'+frameid).css({marginLeft:margl});}}
var bbbwidth=parseInt(framew/3);var leftmarg=bbbwidth*2;jQuery('#bbb-'+mocc+'-l').css({height:frameh,width:bbbwidth,left:0});jQuery('#bbb-'+mocc+'-r').css({height:frameh,width:bbbwidth,left:leftmarg});}
function _wppaAdjustFilmstrip(mocc){if(!document.getElementById('wppa-filmstrip-'+mocc))return;jQuery('.wppa-film-'+mocc).removeClass('wppa-filmthumb-active');if(!_wppaFilmNoMove[mocc]){var xoffset;xoffset=wppaFilmStripLength[mocc]/2-(_wppaCurIdx[mocc]+0.5+wppaPreambule)*wppaThumbnailPitch[mocc]-wppaFilmStripMargin[mocc];if(wppaFilmShowGlue)xoffset-=(wppaFilmStripMargin[mocc]*2+2);jQuery('#wppa-filmstrip-'+mocc).stop().animate({marginLeft:xoffset+'px'});}
else{_wppaFilmNoMove[mocc]=false;}
if(_wppaCurIdx[mocc]!=-1){var from=_wppaCurIdx[mocc]-10;if(from<0)from=0;var to=_wppaCurIdx[mocc]+10;if(to>_wppaSlides[mocc].length)to=_wppaSlides[mocc].length;var index=from;while(index<=to){if(typeof(_wppaId[mocc][index])!='undefined'){if(typeof(document.getElementById('film_wppatnf_'+_wppaId[mocc][index]+'_'+mocc))!='undefined'){var html=document.getElementById('film_wppatnf_'+_wppaId[mocc][index]+'_'+mocc).innerHTML;if(html.search('<!--')!=-1){html=html.replace('<!--','');html=html.replace('-->','');document.getElementById('film_wppatnf_'+_wppaId[mocc][index]+'_'+mocc).innerHTML=html;document.getElementById('wppa-film-'+index+'-'+mocc).title=wppaFilmThumbTitle;}}}
index++;}}
jQuery('#wppa-film-'+_wppaCurIdx[mocc]+'-'+mocc).addClass('wppa-filmthumb-active');}
function wppaUpdateLightboxes(){if(typeof(myLightbox)!="undefined")myLightbox.updateImageList();wppaInitOverlay();}
function _wppaNext(mocc){if(!wppaSlideWrap&&_wppaCurIdx[mocc]==(_wppaSlides[mocc].length-1))return;_wppaNxtIdx[mocc]=_wppaCurIdx[mocc]+1;if(_wppaNxtIdx[mocc]==_wppaSlides[mocc].length)_wppaNxtIdx[mocc]=0;_wppaNextSlide(mocc,0);}
function _wppaNextN(mocc,n){if(!wppaSlideWrap&&_wppaCurIdx[mocc]>=(_wppaSlides[mocc].length-n))return;_wppaNxtIdx[mocc]=_wppaCurIdx[mocc]+n;while(_wppaNxtIdx[mocc]>=_wppaSlides[mocc].length)_wppaNxtIdx[mocc]-=_wppaSlides[mocc].length;_wppaNextSlide(mocc,0);}
function _wppaNextOnCallback(mocc){if(!wppaSlideWrap&&_wppaCurIdx[mocc]==(_wppaSlides[mocc].length-1))return;if(_wppaSkipRated[mocc]){var now=_wppaCurIdx[mocc];var idx=now+1;if(idx==_wppaSlides[mocc].length)idx=0;var next=idx;if(_wppaMyr[mocc][next]!=0){idx++;if(idx==_wppaSlides[mocc].length)idx=0;while(idx!=next&&_wppaMyr[mocc][idx]!=0){idx++;if(idx==_wppaSlides[mocc].length)idx=0;}
next=idx;}
_wppaNxtIdx[mocc]=next;}
else{_wppaNxtIdx[mocc]=_wppaCurIdx[mocc]+1;if(_wppaNxtIdx[mocc]==_wppaSlides[mocc].length)_wppaNxtIdx[mocc]=0;}
_wppaNextSlide(mocc,0);}
function _wppaPrev(mocc){if(!wppaSlideWrap&&_wppaCurIdx[mocc]==0)return;_wppaNxtIdx[mocc]=_wppaCurIdx[mocc]-1;if(_wppaNxtIdx[mocc]<0)_wppaNxtIdx[mocc]=_wppaSlides[mocc].length-1;_wppaNextSlide(mocc,0);}
function _wppaPrevN(mocc,n){if(!wppaSlideWrap&&_wppaCurIdx[mocc]<n)return;_wppaNxtIdx[mocc]=_wppaCurIdx[mocc]-n;while(_wppaNxtIdx[mocc]<0)_wppaNxtIdx[mocc]+=_wppaSlides[mocc].length;_wppaNextSlide(mocc,0);}
function _wppaGoto(mocc,idx){_wppaToTheSame=(_wppaNxtIdx[mocc]==idx);_wppaNxtIdx[mocc]=idx;_wppaNextSlide(mocc,0);}
function _wppaGotoRunning(mocc,idx){if(_wppaIsBusy[mocc]){setTimeout('_wppaGotoRunning('+mocc+','+idx+')',10);return;}
wppaConsoleLog('GotoRunning',mocc);_wppaSSRuns[mocc]=false;_wppaToTheSame=(_wppaNxtIdx[mocc]==idx);_wppaNxtIdx[mocc]=idx;_wppaNextSlide(mocc,"manual");_wppaGotoContinue(mocc);}
function _wppaGotoContinue(mocc){if(_wppaIsBusy[mocc]){setTimeout('_wppaGotoContinue('+mocc+')',10);return;}
setTimeout('_wppaNextSlide('+mocc+', "reset")',_wppaTimeOut[mocc]+10);}
function _wppaStart(mocc,idx){if(idx==-2){var i=0;idx=0;_wppaSkipRated[mocc]=true;if(_wppaMyr[mocc][i]!=0){while(i<_wppaSlides[mocc].length){if(idx==0&&_wppaMyr[mocc][i]==0)idx=i;i++;}}}
if(idx>-1){jQuery('#startstop-'+mocc).html(wppaStart+' '+wppaSlideShow);jQuery('#speed0-'+mocc).css('display','none');jQuery('#speed1-'+mocc).css('display','none');_wppaNxtIdx[mocc]=idx;_wppaCurIdx[mocc]=idx;_wppaNextSlide(mocc,0);_wppaShowMetaData(mocc,'show');}
else{_wppaSSRuns[mocc]=true;_wppaNextSlide(mocc,0);jQuery('#startstop-'+mocc).html(wppaStop);jQuery('#speed0-'+mocc).css('display','inline');jQuery('#speed1-'+mocc).css('display','inline');_wppaShowMetaData(mocc,'hide');jQuery('#bc-pname-'+mocc).html(wppaSlideShow);}
_wppaSetRatingDisplay(mocc);}
function _wppaStop(mocc){_wppaSSRuns[mocc]=false;jQuery('#startstop-'+mocc).html(wppaStart+' '+wppaSlideShow);jQuery('#speed0-'+mocc).css('display','none');jQuery('#speed1-'+mocc).css('display','none');_wppaShowMetaData(mocc,'show');jQuery('#bc-pname-'+mocc).html(_wppaNames[mocc][_wppaCurIdx[mocc]]);}
function _wppaSpeed(mocc,faster){if(faster){if(_wppaTimeOut[mocc]>500)_wppaTimeOut[mocc]/=1.5;}
else{if(_wppaTimeOut[mocc]<60000)_wppaTimeOut[mocc]*=1.5;}}
function _wppaLoadSpinner(mocc){if(!document.getElementById('slide_frame-'+mocc))return;var top;var lft;var elm;var flag=true;if(document.getElementById('theimg0-'+mocc)){if(document.getElementById('theimg0-'+mocc).complete)flag=false;}
if(document.getElementById('theimg1-'+mocc)){if(document.getElementById('theimg1-'+mocc).complete)flag=false;}
top=parseInt(document.getElementById('slide_frame-'+mocc).clientHeight/2)-16;lft=parseInt(document.getElementById('slide_frame-'+mocc).clientWidth/2)-16;jQuery('#spinner-'+mocc).css('top',top);jQuery('#spinner-'+mocc).css('left',lft);jQuery('#spinner-'+mocc).html('<img id="spinnerimg-'+mocc+'" src="'+wppaImageDirectory+'loading.gif" style="box-shadow: none" />');}
function _wppaUnloadSpinner(mocc){jQuery('#spinner-'+mocc).html('');}
function wppaGetContainerWidth(mocc){var elm=document.getElementById('wppa-container-'+mocc);var w=0;if(!wppaAutoColumnWidth[mocc])return elm.clientWidth;while(w==0){elm=elm.parentNode;w=jQuery(elm).width();}
return w*wppaAutoColumnFrac[mocc];}
function _wppaDoAutocol(mocc){var w;var h;if(!wppaAutoColumnWidth[mocc])return;w=wppaGetContainerWidth(mocc);if(wppaColWidth[mocc]==w&&w!=0){setTimeout('_wppaDoAutocol('+mocc+')',100);return;}
wppaColWidth[mocc]=w;jQuery(".wppa-container-"+mocc).css('width',w);jQuery(".wppa-asym-text-frame-"+mocc).css('width',w-wppaTextFrameDelta);jQuery(".wppa-cover-box-"+mocc).css('width',w-wppaBoxDelta);var exists=jQuery(".wppa-cover-box-mcr-"+mocc);var MCRWidth;if(exists.length>1){wppaConsoleLog('aantal='+exists.length);var nCovers=parseInt((w+8)/(wppaMaxCoverWidth+8))+1;var coverMax1=nCovers-1;MCRWidth=parseInt(((w+8)/nCovers)-8);var idx=0;while(idx<exists.length){var col=idx%nCovers;switch(col){case 0:jQuery(exists[idx]).css({'marginLeft':'0px','clear':'both','float':'left'});break;case coverMax1:jQuery(exists[idx]).css({'marginLeft':'8px','clear':'none','float':'right'});break;default:jQuery(exists[idx]).css({'marginLeft':'8px','clear':'none','float':'left'});}
idx++;}
jQuery(".wppa-asym-text-frame-mcr-"+mocc).css('width',MCRWidth-wppaTextFrameDelta);jQuery(".wppa-cover-box-mcr-"+mocc).css('width',MCRWidth-wppaBoxDelta);}
else{jQuery(".wppa-asym-text-frame-mcr-"+mocc).css('width',w-wppaTextFrameDelta);jQuery(".wppa-cover-box-mcr-"+mocc).css({'width':(w-wppaBoxDelta),'marginLeft':'0px','float':'left'});}
jQuery(".thumbnail-area-"+mocc).css('width',w-wppaThumbnailAreaDelta);if(wppaThumbSpaceAuto){var tfw=parseInt(jQuery(".thumbnail-frame-"+mocc).css('width'));if(tfw){var minspc=wppaMinThumbSpace;var weff=w-wppaThumbnailAreaDelta-7;var nthumbs=parseInt(weff/(tfw+minspc));var availsp=weff-nthumbs*tfw;var newspc=parseInt(0.5+availsp/(nthumbs+1));jQuery(".thumbnail-frame-"+mocc).css({marginLeft:newspc});}}
jQuery(".wppa-com-alt-"+mocc).css('width',w-wppaThumbnailAreaDelta-wppaComAltSize-20);jQuery(".wppa-file-"+mocc).css('width',w-16);jQuery(".wppa-file-mcr-"+mocc).css('width',MCRWidth-wppaBoxDelta-6);wppaFormatSlide(mocc);jQuery(".wppa-comment-textarea-"+mocc).css('width',w*0.7);wppaFilmStripLength[mocc]=w-wppaFilmStripAreaDelta[mocc];jQuery("#filmwindow-"+mocc).css('width',wppaFilmStripLength[mocc]);_wppaAdjustFilmstrip(mocc);if(!wppaIsMini[mocc]&&typeof(_wppaSlides[mocc])!='undefined'){if(wppaColWidth[mocc]<wppaMiniTreshold){jQuery('#prev-arrow-'+mocc).html(wppaPrevP);jQuery('#next-arrow-'+mocc).html(wppaNextP);jQuery('#wppa-avg-rat-'+mocc).html(wppaAvgRat);jQuery('#wppa-my-rat-'+mocc).html(wppaMyRat);jQuery('#counter-'+mocc).html((_wppaCurIdx[mocc]+1)+' / '+_wppaSlides[mocc].length);}
else{jQuery('#prev-arrow-'+mocc).html(wppaPreviousPhoto);jQuery('#next-arrow-'+mocc).html(wppaNextPhoto);jQuery('#wppa-avg-rat-'+mocc).html(wppaAvgRating);jQuery('#wppa-my-rat-'+mocc).html(wppaMyRating);jQuery('#counter-'+mocc).html(wppaPhoto+' '+(_wppaCurIdx[mocc]+1)+' '+wppaOf+' '+_wppaSlides[mocc].length);}}
jQuery(".wppa-sphoto-"+mocc).css('width',w);jQuery(".wppa-simg-"+mocc).css('width',w-2*wppaSlideBorderWidth);jQuery(".wppa-simg-"+mocc).css('height','');jQuery(".wppa-mphoto-"+mocc).css('width',w+10);jQuery(".wppa-mimg-"+mocc).css('width',w);jQuery(".wppa-mimg-"+mocc).css('height','');setTimeout('_wppaDoAutocol('+mocc+')',10);}
function _wppaCheckRewind(mocc){var n_images;var n_diff;var l_substrate;var x_marg;if(!document.getElementById('wppa-filmstrip-'+mocc))return;n_diff=Math.abs(_wppaCurIdx[mocc]-_wppaNxtIdx[mocc]);if(n_diff<=wppaFilmPageSize[mocc])return;var n_images=wppaFilmStripLength[mocc]/wppaThumbnailPitch[mocc];if(n_diff>=((n_images+1)/2)){l_substrate=wppaThumbnailPitch[mocc]*_wppaSlides[mocc].length;if(wppaFilmShowGlue)l_substrate+=(2+2*wppaFilmStripMargin[mocc]);x_marg=parseInt(jQuery('#wppa-filmstrip-'+mocc).css('margin-left'));if(_wppaNxtIdx[mocc]>_wppaCurIdx[mocc]){x_marg-=l_substrate;}
else{x_marg+=l_substrate;}
jQuery('#wppa-filmstrip-'+mocc).css('margin-left',x_marg+'px');}}
function _wppaSetRatingDisplay(mocc){var idx,avg,tmp,cnt,dsc,myr,dsctxt;if(!document.getElementById('wppa-rating-'+mocc))return;avg=_wppaAvg[mocc][_wppaCurIdx[mocc]];tmp=avg.split('|');avg=tmp[0];cnt=tmp[1];dsc=_wppaDisc[mocc][_wppaCurIdx[mocc]];myr=_wppaMyr[mocc][_wppaCurIdx[mocc]];wppaConsoleLog('avg='+avg+' cnt='+cnt+' dsc='+dsc+' myr='+myr);if(wppaRatingDisplayType=='graphic'){_wppaSetRd(mocc,avg,'#wppa-avg-');_wppaSetRd(mocc,myr,'#wppa-rate-');if(myr==0){jQuery('#wppa-dislike-'+mocc).css('display','inline');jQuery('#wppa-dislike-imgdiv-'+mocc).css('display','inline');jQuery('#wppa-filler-'+mocc).css('display','none');jQuery('#wppa-dislike-'+mocc).stop().fadeTo(100,wppaStarOpacity);}
else{jQuery('#wppa-dislike-'+mocc).css('display','none');jQuery('#wppa-dislike-imgdiv-'+mocc).css('display','none');jQuery('#wppa-filler-'+mocc).css('display','inline');jQuery('#wppa-filler-'+mocc).stop().fadeTo(100,wppaStarOpacity);if(wppaShowDislikeCount){dsctxt=wppaGetDislikeText(dsc,myr,true);jQuery('#wppa-filler-'+mocc).attr('title',dsctxt);}}}
else{jQuery('#wppa-numrate-avg-'+mocc).html(avg+' ('+cnt+') ');if(wppaRatingOnce&&myr>0){jQuery('#wppa-numrate-mine-'+mocc).html(myr);}
else if(myr<0){jQuery('#wppa-numrate-mine-'+mocc).html(' dislike');}
else{var htm='';for(i=1;i<=wppaRatingMax;i++){if(myr==i){htm+='<span style="cursor:pointer; font-weight:bold;" onclick="_wppaRateIt('+mocc+', '+i+')">&nbsp;'+i+'&nbsp;</span>';}
else{if(myr>(i-1)&&myr<i)htm+='&nbsp;('+myr+')&nbsp;';htm+='<span style="cursor:pointer;" onclick="_wppaRateIt('+mocc+', '+i+')" onmouseover="this.style.fontWeight=\'bold\'" onmouseout="this.style.fontWeight=\'normal\'" >&nbsp;'+i+'&nbsp;</span>';}}
jQuery('#wppa-numrate-mine-'+mocc).html(htm);}
if(myr==0){jQuery('#wppa-dislike-'+mocc).css('display','inline');jQuery('#wppa-dislike-imgdiv-'+mocc).css('display','inline');jQuery('#wppa-filler-'+mocc).css('display','none');jQuery('#wppa-dislike-'+mocc).stop().fadeTo(100,wppaStarOpacity);}
else{jQuery('#wppa-dislike-'+mocc).css('display','none');jQuery('#wppa-dislike-imgdiv-'+mocc).css('display','none');jQuery('#wppa-filler-'+mocc).css('display','inline');}
if(wppaShowDislikeCount){dsctxt=wppaGetDislikeText(dsc,myr,false);dsctxt+='&bull; ';jQuery('#wppa-discount-'+mocc).html(dsctxt);jQuery('#wppa-filler-'+mocc).css('display','none');}
else{jQuery('#wppa-discount-'+mocc).html('');}}
if(myr==0){jQuery('#wppa-vote-button-'+mocc).attr('value',wppaVoteForMe);}
else{jQuery('#wppa-vote-button-'+mocc).attr('value',wppaVotedForMe);}
jQuery('#wppa-vote-count-'+mocc).html(cnt);}
function wppaGetDislikeText(dsc,myr,incmine){if(dsc==0&&myr!=0)dsctxt=' '+wppaNoDislikes+' ';else if(dsc==1)dsctxt=' '+wppa1Dislike+' ';else dsctxt=' '+dsc+' '+wppaDislikes+' ';if(incmine&&myr<0)dsctxt+=wppaIncludingMine;return dsctxt;}
function _wppaSetRd(mocc,avg,where){var idx1=parseInt(avg);var idx2=idx1+1;var frac=avg-idx1;var opac=wppaStarOpacity+frac*(1.0-wppaStarOpacity);var ilow=1;var ihigh=wppaRatingMax;for(idx=ilow;idx<=ihigh;idx++){if(where=='#wppa-rate-'){jQuery(where+mocc+'-'+idx).attr('src',wppaImageDirectory+'star.png');}
if(idx<=idx1){jQuery(where+mocc+'-'+idx).stop().fadeTo(100,1.0);}
else if(idx==idx2){jQuery(where+mocc+'-'+idx).stop().fadeTo(100,opac);}
else{jQuery(where+mocc+'-'+idx).stop().fadeTo(100,wppaStarOpacity);}}}
function _wppaFollowMe(mocc,idx){if(_wppaSSRuns[mocc])return;if(_wppaMyr[mocc][_wppaCurIdx[mocc]]!=0&&wppaRatingOnce)return;if(_wppaMyr[mocc][_wppaCurIdx[mocc]]<0)return;if(_wppaVIP)return;_wppaSetRd(mocc,idx,'#wppa-rate-');}
function _wppaLeaveMe(mocc,idx){if(_wppaSSRuns[mocc])return;if(_wppaMyr[mocc][_wppaCurIdx[mocc]]!=0&&wppaRatingOnce)return;if(_wppaMyr[mocc][_wppaCurIdx[mocc]]<0)return;if(_wppaVIP)return;_wppaSetRd(mocc,_wppaMyr[mocc][_wppaCurIdx[mocc]],'#wppa-rate-');}
function _bumpViewCount(photo){if(!wppaBumpViewCount)return;var xmlhttp=wppaGetXmlHttp();url=wppaAjaxUrl+'?action=wppa&wppa-action=bumpviewcount&wppa-photo='+photo;url+='&wppa-nonce='+jQuery('#wppa-nonce').attr('value');xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){}}
xmlhttp.open('GET',url,true);xmlhttp.send();}
function wppaVoteThumb(mocc,photoid){var xmlhttp=wppaGetXmlHttp();url=wppaAjaxUrl+'?action=wppa&wppa-action=rate&wppa-rating=1&wppa-rating-id='+photoid;url+='&wppa-occur='+mocc;url+='&wppa-nonce='+jQuery('#wppa-nonce').attr('value');if(wppaLang!='')url+='&lang='+wppaLang;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){jQuery('#wppa-vote-button-'+mocc+'-'+photoid).attr('value',wppaVotedForMe);}}
xmlhttp.open('GET',url,true);xmlhttp.send();}
function _wppaRateIt(mocc,value){if(value==0)return;var photoid=_wppaId[mocc][_wppaCurIdx[mocc]];var oldval=_wppaMyr[mocc][_wppaCurIdx[mocc]];var url=_wppaVRU[mocc][_wppaCurIdx[mocc]]+'&wppa-rating='+value+'&wppa-rating-id='+photoid;url+='&wppa-nonce='+jQuery('#wppa-nonce').attr('value');if(_wppaSSRuns[mocc])return;if(oldval!=0&&wppaRatingOnce)return;if(oldval<0)return;_wppaVIP=true;_wppaLastVote=value;jQuery('#wppa-rate-'+mocc+'-'+value).attr('src',wppaTickImg.src);jQuery('#wppa-rate-'+mocc+'-'+value).stop().fadeTo(100,1.0);var xmlhttp=wppaGetXmlHttp();if((wppaRatingUseAjax||value==-1)&&xmlhttp){url=wppaAjaxUrl+'?action=wppa&wppa-action=rate&wppa-rating='+value+'&wppa-rating-id='+photoid;url+='&wppa-occur='+mocc+'&wppa-index='+_wppaCurIdx[mocc];url+='&wppa-nonce='+jQuery('#wppa-nonce').attr('value');if(wppaLang!='')url+='&lang='+wppaLang;xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){var ArrValues=xmlhttp.responseText.split("||");wppaConsoleLog(xmlhttp.responseText);if(ArrValues[0]=='0'){alert('Error Code='+ArrValues[1]+'\n\n'+ArrValues[2]);}
else{if(value==-1){}
_wppaMyr[ArrValues[0]][ArrValues[2]]=ArrValues[3];_wppaAvg[ArrValues[0]][ArrValues[2]]=ArrValues[4];_wppaDisc[ArrValues[0]][ArrValues[2]]=ArrValues[5];_wppaSetRatingDisplay(mocc);if(wppaNextOnCallback)_wppaNextOnCallback(mocc);}}}
xmlhttp.open('GET',url,true);xmlhttp.send();}}
function _wppaValidateComment(mocc){var photoid=_wppaId[mocc][_wppaCurIdx[mocc]];var name=jQuery('#wppa-comname-'+mocc).attr('value');if(name.length<1){alert(wppaPleaseName);return false;}
if(wppaEmailRequired){var email=jQuery('#wppa-comemail-'+mocc).attr('value');var atpos=email.indexOf("@");var dotpos=email.lastIndexOf(".");if(atpos<1||dotpos<atpos+2||dotpos+2>=email.length){alert(wppaPleaseEmail);return false;}}
var text=jQuery('#wppa-comment-'+mocc).attr('value');if(text.length<1){alert(wppaPleaseComment);return false;}
return true;}
function _wppaGo(url){document.location=url;}
function _wppaBbb(mocc,where,act){if(_wppaSSRuns[mocc])return;var elm='#bbb-'+mocc+'-'+where;switch(act){case'show':if(where=='l')jQuery(elm).attr('title',wppaPreviousPhoto);if(where=='r')jQuery(elm).attr('title',wppaNextPhoto);jQuery('.bbb-'+mocc).css('cursor','pointer');break;case'hide':jQuery('.bbb-'+mocc).removeAttr('title');jQuery('.bbb-'+mocc).css('cursor','default');break;case'click':if(where=='l')wppaPrev(mocc);if(where=='r')wppaNext(mocc);break;default:alert('Unimplemented instruction: '+act+' on: '+elm);}}
function wppaOpenComments(mocc){if(_wppaSSRuns[mocc])_wppaStop(mocc);jQuery('#wppa-comtable-wrap-'+mocc).css('display','block');jQuery('#wppa-comform-wrap-'+mocc).css('display','block');jQuery('#wppa-comfooter-wrap-'+mocc).css('display','none');}
function _wppaShowMetaData(mocc,key){if(!_wppaSSRuns[mocc]){if(key=='show'){if(wppaAutoOpenComments){jQuery('#wppa-comtable-wrap-'+mocc).css('display','block');jQuery('#wppa-comform-wrap-'+mocc).css('display','block');jQuery('#wppa-comfooter-wrap-'+mocc).css('display','none');}
if(wppaSlideWrap||(_wppaCurIdx[mocc]!=0))
jQuery('.wppa-prev-'+mocc).css('visibility','visible');if(wppaSlideWrap||(_wppaCurIdx[mocc]!=(_wppaSlides[mocc].length-1)))
jQuery('.wppa-next-'+mocc).css('visibility','visible');}
else{jQuery('#wppa-comtable-wrap-'+mocc).css('display','none');jQuery('#wppa-comform-wrap-'+mocc).css('display','none');jQuery('#wppa-comfooter-wrap-'+mocc).css('display','block');}}
else{}
if(key=='show'){jQuery("#imagedesc-"+mocc).css('visibility','visible');jQuery("#imagetitle-"+mocc).css('visibility','visible');jQuery("#counter-"+mocc).css('visibility','visible');jQuery("#iptccontent-"+mocc).css('visibility','visible');jQuery("#exifcontent-"+mocc).css('visibility','visible');}
else{jQuery("#counter-"+mocc).css('visibility','hidden');jQuery('.wppa-prev-'+mocc).css('visibility','hidden');jQuery('.wppa-next-'+mocc).css('visibility','hidden');jQuery("#iptccontent-"+mocc).css('visibility','hidden');jQuery("#exifcontent-"+mocc).css('visibility','hidden');}}
function wppaGetCurrentFullUrl(mocc,idx){var xurl=document.location.href;var url;var temp1=xurl.split("?");var temp2='nil';var temp3;var i=0;var first=true;if(temp1[1])temp2=temp1[1].split("&");var albumSeen=false;url=temp1[0];if(temp2!='nil'){if(temp2.length>0){while(i<temp2.length){temp3=temp2[i].split("=");if(temp3[0]=="wppa-album")albumSeen=true;if(temp3[0]!="wppa-photo"){if(first)url+="?";else url+="&";first=false;url+=temp2[i];}
i++;}}}
if(!albumSeen)return'';if(first)url+="?";else url+="&";if(wppaUsePhotoNamesInUrls){url+="wppa-photo="+_wppaNames[mocc][idx];}
else{url+="wppa-photo="+_wppaId[mocc][idx];}
return url;}
var triggerElementID=null;var fingerCount=0;var startX=0;var startY=0;var curX=0;var curY=0;var deltaX=0;var deltaY=0;var horzDiff=0;var vertDiff=0;var minLength=72;var swipeLength=0;var swipeAngle=null;var swipeDirection=null;var wppaMocc=0;function wppaTouchStart(event,passedName,mocc){wppaMocc=mocc;event.preventDefault();fingerCount=event.touches.length;if(fingerCount==1){startX=event.touches[0].pageX;startY=event.touches[0].pageY;triggerElementID=passedName;}else{wppaTouchCancel(event);}}
function wppaTouchMove(event){event.preventDefault();if(event.touches.length==1){curX=event.touches[0].pageX;curY=event.touches[0].pageY;}else{wppaTouchCancel(event);}}
function wppaTouchEnd(event){event.preventDefault();if(fingerCount==1&&curX!=0){swipeLength=Math.round(Math.sqrt(Math.pow(curX-startX,2)+Math.pow(curY-startY,2)));if(swipeLength>=minLength){wppaCalculateAngle();wppaDetermineSwipeDirection();wppaProcessingRoutine();wppaTouchCancel(event);}else{wppaTouchCancel(event);}}else{wppaTouchCancel(event);}}
function wppaTouchCancel(event){fingerCount=0;startX=0;startY=0;curX=0;curY=0;deltaX=0;deltaY=0;horzDiff=0;vertDiff=0;swipeLength=0;swipeAngle=null;swipeDirection=null;triggerElementID=null;wppaMocc=0;}
function wppaCalculateAngle(){var X=startX-curX;var Y=curY-startY;var Z=Math.round(Math.sqrt(Math.pow(X,2)+Math.pow(Y,2)));var r=Math.atan2(Y,X);swipeAngle=Math.round(r*180/Math.PI);if(swipeAngle<0){swipeAngle=360-Math.abs(swipeAngle);}}
function wppaDetermineSwipeDirection(){if((swipeAngle<=45)&&(swipeAngle>=0)){swipeDirection='left';}else if((swipeAngle<=360)&&(swipeAngle>=315)){swipeDirection='left';}else if((swipeAngle>=135)&&(swipeAngle<=225)){swipeDirection='right';}else if((swipeAngle>45)&&(swipeAngle<135)){swipeDirection='down';}else{swipeDirection='up';}}
function wppaProcessingRoutine(){var swipedElement=document.getElementById(triggerElementID);if(wppaMocc==-1){if(swipeDirection=='left'){wppaOvlShowNext();wppaMocc=0;}
else if(swipeDirection=='right'){wppaOvlShowPrev();wppaMocc=0;}}
else{if(swipeDirection=='left'){wppaNext(wppaMocc);wppaMocc=0;}
else if(swipeDirection=='right'){wppaPrev(wppaMocc);wppaMocc=0;}
else if(swipeDirection=='up'){}
else if(swipeDirection=='down'){}}}
var wppaBackgroundColorImage='';var _wppaTimer=new Array();var wppa_saved_id=new Array();var wppaPopupLinkType='';var wppaPopupOnclick=new Array();var wppaThumbTargetBlank=false;function wppaPopUp(mocc,elm,id,name,desc,rating,ncom){var topDivBig,topDivSmall,leftDivBig,leftDivSmall;var heightImgBig,heightImgSmall,widthImgBig,widthImgSmall,widthImgBigSpace;var puImg;var vOffset=0;clearTimeout(_wppaTimer[mocc]);if(document.getElementById('x-'+id+'-'+mocc)){var namediv=name?'<div id="wppa-name-'+mocc+'" style="display:none; padding:1px;" class="wppa_pu_info">'+name+'</div>':'';var descdiv=desc?'<div id="wppa-desc-'+mocc+'" style="clear:both; display:none; padding:1px;" class="wppa_pu_info">'+desc+'</div>':'';var ratediv=rating?'<div id="wppa-rat-'+mocc+'" style="clear:both; display:none; padding:1px;" class="wppa_pu_info">'+rating+'</div>':'';var ncomdiv=ncom?'<div id="wppa-ncom-'+mocc+'" style="clear:both; display:none; padding:1px;" class="wppa_pu_info">'+ncom+'</div>':'';var popuptext=namediv+descdiv+ratediv+ncomdiv;var target='';if(wppaThumbTargetBlank)target='target="_blank"';switch(wppaPopupLinkType){case'none':jQuery('#wppa-popup-'+mocc).html('<div class="wppa-popup" style="background-color:'+wppaBackgroundColorImage+'; text-align:center;"><img id="wppa-img-'+mocc+'" src="'+elm.src+'" title="" style="border-width: 0px;" />'+popuptext+'</div>');break;case'fullpopup':jQuery('#wppa-popup-'+mocc).html('<div class="wppa-popup" style="background-color:'+wppaBackgroundColorImage+'; text-align:center;"><img id="wppa-img-'+mocc+'" src="'+elm.src+'" title="" style="border-width: 0px;" onclick="'+wppaPopupOnclick[id]+'" />'+popuptext+'</div>');break;default:if(elm.onclick){jQuery('#wppa-popup-'+mocc).html('<div class="wppa-popup" style="background-color:'+wppaBackgroundColorImage+'; text-align:center;"><img id="wppa-img-'+mocc+'" src="'+elm.src+'" title="" style="border-width: 0px;" />'+popuptext+'</div>');document.getElementById('wppa-img-'+mocc).onclick=elm.onclick;}
else{jQuery('#wppa-popup-'+mocc).html('<div class="wppa-popup" style="background-color:'+wppaBackgroundColorImage+'; text-align:center;"><a id="wppa-a" href="'+document.getElementById('x-'+id+'-'+mocc).href+'" '+target+' style="line-height:1px;" ><img id="wppa-img-'+mocc+'" src="'+elm.src+'" title="" style="border-width: 0px;" /></a>'+popuptext+'</div>');}}}
puImg=document.getElementById('wppa-img-'+mocc);if(puImg.naturalWidth)widthImgBig=puImg.naturalWidth;else widthImgBig=parseInt(puImg.clientWidth);if(puImg.naturalHeight)heightImgBig=puImg.naturalHeight;else heightImgBig=parseInt(puImg.clientHeight);if(puImg)jQuery(".wppa_pu_info").css('width',((widthImgBig>heightImgBig?widthImgBig:heightImgBig)-8)+'px');leftDivSmall=parseInt(elm.offsetLeft)-7-5-1;topDivSmall=parseInt(elm.offsetTop)-7-5-1;topDivSmall-=vOffset;widthImgSmall=parseInt(elm.clientWidth);heightImgSmall=parseInt(elm.clientHeight);widthImgBigSpace=widthImgBig>heightImgBig?widthImgBig:heightImgBig;leftDivBig=leftDivSmall-parseInt((widthImgBigSpace-widthImgSmall)/2);topDivBig=topDivSmall-parseInt((heightImgBig-heightImgSmall)/2);var lrMarg=parseInt((widthImgBigSpace-widthImgBig)/2);jQuery('#wppa-popup-'+mocc).css({"marginLeft":leftDivSmall+"px","marginTop":topDivSmall+"px"});jQuery('#wppa-img-'+mocc).css({"marginLeft":0,"marginRight":0,"width":widthImgSmall+"px","height":heightImgSmall+"px"});jQuery('#wppa-popup-'+mocc).stop().animate({"marginLeft":leftDivBig+"px","marginTop":topDivBig+"px"},400);jQuery('#wppa-img-'+mocc).stop().animate({"marginLeft":lrMarg+"px","marginRight":lrMarg+"px","width":widthImgBig+"px","height":heightImgBig+"px"},400);_wppaTimer[mocc]=setTimeout('wppaPopReady('+mocc+')',400);}
function wppaPopReady(mocc){jQuery("#wppa-name-"+mocc).show();jQuery("#wppa-desc-"+mocc).show();jQuery("#wppa-rat-"+mocc).show();jQuery("#wppa-ncom-"+mocc).show();}
function wppaPopDown(mocc){jQuery('#wppa-popup-'+mocc).html("");return;}
function wppaFullPopUp(mocc,id,url,xwidth,xheight){var height=xheight+50;var width=xwidth+14;var name='';var desc='';var elm=document.getElementById('i-'+id+'-'+mocc);if(elm){name=elm.alt;desc=elm.title;}
var wnd=window.open('','Print','width='+width+', height='+height+', location=no, resizable=no, menubar=yes ');wnd.document.write('<html>');wnd.document.write('<head>');wnd.document.write('<style type="text/css">body{margin:0; padding:6px; background-color:'+wppaBackgroundColorImage+'; text-align:center;}</style>');wnd.document.write('<title>'+name+'</title>');wnd.document.write('<script type="text/javascript">function wppa_downl(id){'+'var xmlhttp = new XMLHttpRequest();'+'var url = "'+wppaAjaxUrl+'?action=wppa&wppa-action=makeorigname&photo-id='+id+'&from=popup";'+'xmlhttp.open("GET",url,false);'+'xmlhttp.send();'+'if (xmlhttp.readyState==4 && xmlhttp.status==200) {'+'var result = xmlhttp.responseText.split("||");'+'if (result[1] == "0") {'+'window.open(result[2]);'+'return true;'+'}'+'else {'+'alert("Error: "+result[1]+" "+result[2]);'+'return false;'+'}'+'}'+'else {'+'alert("Comm error encountered");'+'return false;'+'}'+'}</script>');wnd.document.write('<script type="text/javascript">function wppa_print(){'+'document.getElementById("wppa_printer").style.visibility="hidden"; '+'document.getElementById("wppa_download").style.visibility="hidden"; '+'window.print();'+'}</script>');wnd.document.write('</head>');wnd.document.write('<body>');wnd.document.write('<div style="width:'+xwidth+'px;">');wnd.document.write('<img src="'+url+'" style="padding-bottom:6px;" /><br/>');wnd.document.write('<div style="text-align:center">'+desc+'</div>');var left=xwidth-66;wnd.document.write('<img src="'+wppaImageDirectory+'download.png" id="wppa_download" title="Download" style="position:absolute; top:6px; left:'+left+'px; background-color:'+wppaBackgroundColorImage+'; padding: 2px; cursor:pointer;" onclick="wppa_downl();" />');left=xwidth-30;wnd.document.write('<img src="'+wppaImageDirectory+'printer.png" id="wppa_printer" title="Print" style="position:absolute; top:6px; left:'+left+'px; background-color:'+wppaBackgroundColorImage+'; padding: 2px; cursor:pointer;" onclick="wppa_print();" />');wnd.document.write('</div>');wnd.document.write('</body>');wnd.document.write('</html>');}
function wppaEditPhoto(mocc,id){var name='Edit Photo '+id;var desc='';var width=960;var height=512;if(screen.availWidth<width)width=screen.availWidth;var wnd=window.open("","_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=yes, width="+width+", height="+height,true);wnd.document.write('<!DOCTYPE html>');wnd.document.write('<html>');wnd.document.write('<head>');wnd.document.write('<link rel="stylesheet" id="wppa_style-css"  href="'+wppaSiteUrl+'/wp-content/plugins/wp-photo-album-plus/wppa-admin-styles.css?ver='+wppaVersion+'" type="text/css" media="all" />'+'<style>body {font-family: sans-serif; font-size: 12px; line-height: 1.4em;}a {color: #21759B;}</style>'+'<script type="text/javascript" src="'+wppaSiteUrl+'/wp-includes/js/jquery/jquery.js?ver='+wppaVersion+'"></script>'+'<script type="text/javascript" src="'+wppaSiteUrl+'/wp-content/plugins/wp-photo-album-plus/wppa-admin-scripts.js?ver='+wppaVersion+'"></script>'+'<title>'+name+'</title>'+'<script type="text/javascript">wppaAjaxUrl="'+wppaAjaxUrl+'";</script>');wnd.document.write('</head>');wnd.document.write('<body>');var xmlhttp=wppaGetXmlHttp();var data='action=wppa&wppa-action=front-edit&photo-id='+id+'&moccur='+mocc;var url=wppaAjaxUrl+'?'+data;xmlhttp.open('POST',url,false);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send(data);if(xmlhttp.readyState==4&&xmlhttp.status==200){var result=xmlhttp.responseText;wnd.document.write(result);}
wnd.document.write('<script>wppaPhotoStatusChange('+id+')</script>');wnd.document.write('</body>');wnd.document.write('</html>');}
var wppaHis=0;var wppaStartHtml=new Array();var wppaCanAjaxRender=false;var wppaCanPushState=false;var wppaAllowAjax=true;var wppaMaxOccur=0;var wppaFirstOccur=0;var wppaUsePhotoNamesInUrls=false;jQuery(document).ready(function(e){if(wppaAllowAjax&&wppaGetXmlHttp()){wppaCanAjaxRender=true;}
if(typeof(history.pushState)!='undefined'){var i=1;while(i<=wppaMaxOccur){wppaStartHtml[i]=jQuery('#wppa-container-'+i).html();i++;}
wppaCanPushState=true;}});function wppaGetXmlHttp(){if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}
else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
return xmlhttp;}
window.onpopstate=function(event){var occ=0;if(wppaCanPushState){if(event.state){occ=event.state.occur;switch(event.state.type){case'html':jQuery('#wppa-container-'+occ).html(event.state.html);break;case'slide':_wppaGoto(occ,event.state.slide);break;}}
else if(wppaUpdateAddressLine){occ=wppaFirstOccur;jQuery('#wppa-container-'+occ).html(wppaStartHtml[occ]);wppaFirstOccur=0;if(occ==0){var url=document.location.href;var urls=url.split("&wppa-occur=");occ=parseInt(urls[1]);}
var url=document.location.href;var urls=url.split("&wppa-photo=");var photo=parseInt(urls[1]);if(photo>0){var idx=0;while(idx<_wppaId[occ].length){if(_wppaId[occ][idx]==photo)break;idx++;}
if(idx<_wppaId[occ].length)_wppaGoto(occ,idx);}}
if(document.getElementById('theslide0-'+occ)){_wppaStop(occ);}}
if(typeof(wppaQRUpdate)!='undefined')wppaQRUpdate(document.location.href);};function wppaDoAjaxRender(mocc,ajaxurl,newurl){if(wppaLang!='')ajaxurl+='&lang='+wppaLang;var xmlhttp=wppaGetXmlHttp();if(wppaCanAjaxRender){if(_wppaSSRuns[mocc])_wppaStop(mocc);jQuery('#wppa-ajax-spin-'+mocc).css('display','');xmlhttp.open('GET',ajaxurl,false);xmlhttp.send();jQuery('#wppa-container-'+mocc).html(xmlhttp.responseText);if(wppaCanPushState&&wppaUpdateAddressLine){wppaHis++;cont=xmlhttp.responseText;try{history.pushState({page:wppaHis,occur:mocc,type:'html',html:cont},"---",newurl);wppaConsoleLog('Ajax rendering: History stack updated');}
catch(err){wppaConsoleLog('Ajax rendering: Failed to update history stack');}
if(wppaFirstOccur==0)wppaFirstOccur=mocc;}
wppaUpdateLightboxes();if(typeof(wppaQRUpdate)!='undefined')wppaQRUpdate(newurl);wppaColWidth[mocc]=0;jQuery('#speed0-'+mocc).html(wppaSlower);jQuery('#speed1-'+mocc).html(wppaFaster);jQuery('#wppa-ajax-spin-'+mocc).css('display','none');}
else{document.location.href=newurl;wppaColWidth[mocc]=0;}}
function wppaAjaxApprovePhoto(photoid){var xmlhttp=wppaGetXmlHttp();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){if(xmlhttp.responseText=='OK'){jQuery('.wppa-approve-'+photoid).css('display','none');}
else{alert(xmlhttp.responseText);}}}
ajaxurl=wppaAjaxUrl+'?action=wppa&wppa-action=approve&photo-id='+photoid;xmlhttp.open('GET',ajaxurl,true);xmlhttp.send();}
function wppaAjaxRemovePhoto(photoid,isslide){var xmlhttp=wppaGetXmlHttp();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){var rtxt=xmlhttp.responseText.split('||');if(rtxt[0]=='OK'){if(isslide){alert(rtxt[1]);document.location=document.location;}
else{jQuery('.wppa-approve-'+photoid).css('display','none');jQuery('.thumbnail-frame-photo-'+photoid).css('display','none');}}
else{alert(xmlhttp.responseText);}}}
ajaxurl=wppaAjaxUrl+'?action=wppa&wppa-action=remove&photo-id='+photoid;xmlhttp.open('GET',ajaxurl,true);xmlhttp.send();}
function wppaAjaxApproveComment(commentid){var xmlhttp=wppaGetXmlHttp();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){if(xmlhttp.responseText=='OK'){jQuery('.wppa-approve-'+commentid).css('display','none');}
else{alert(xmlhttp.responseText);}}}
ajaxurl=wppaAjaxUrl+'?action=wppa&wppa-action=approve&comment-id='+commentid;xmlhttp.open('GET',ajaxurl,true);xmlhttp.send();}
function wppaAjaxRemoveComment(commentid){var xmlhttp=wppaGetXmlHttp();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){var rtxt=xmlhttp.responseText.split('||');if(rtxt[0]=='OK'){jQuery('.wppa-approve-'+commentid).css('display','none');jQuery('.wppa-comment-'+commentid).css('display','none');}
else{alert(xmlhttp.responseText);}}}
ajaxurl=wppaAjaxUrl+'?action=wppa&wppa-action=remove&comment-id='+commentid;xmlhttp.open('GET',ajaxurl,true);xmlhttp.send();}
function wppaPushStateSlide(mocc,slide,url){if(!wppaIsMini[mocc]){if(wppaCanPushState&&wppaUpdateAddressLine){if(url!=''){try{history.pushState({page:wppaHis,occur:mocc,type:'slide',slide:slide},"---",url);wppaConsoleLog('Slide history stack updated');}
catch(err){wppaConsoleLog('Slide history stack update failed');}}}}}
var wppaOvlUrls;var wppaOvlUrl;var wppaOvlTitles;var wppaOvlTitle;var wppaOvlIdx=-1;var wppaOvlFirst=true;var wppaOvlKbHandler='';var wppaOvlSizeHandler='';var wppaOvlPadTop=5;var wppaWindowInnerWidth;var wppaWindowInnerHeight;var wppaOvlIsSingle;var wppaOvlCloseTxt='CLOSE';var wppaOvlTxtHeight=36;var wppaOvlOpacity=0.8;var wppaOvlOnclickType='none';var wppaOvlTheme='black';var wppaOvlAnimSpeed=300;var wppaVer4WindowWidth=800;var wppaVer4WindowHeight=600;var wppaOvlFontFamily='Helvetica';var wppaOvlFontSize='10';var wppaOvlFontColor='';var wppaOvlFontWeight='bold';var wppaOvlLineHeight='12';var wppaOvlShowCounter=true;jQuery(document).ready(function(e){wppaInitOverlay();});function wppaFindWindowSize(){wppaConsoleLog('wppaFindWindowSize',1);wppaWindowInnerWidth=window.innerWidth;wppaWindowInnerHeight=window.innerHeight;if(typeof(wppaWindowInnerWidth)=='undefined')wppaWindowInnerWidth=jQuery(window).width();if(typeof(wppaWindowInnerHeight)=='undefined')wppaWindowInnerHeight=jQuery(window).height();wppaConsoleLog('winw='+wppaWindowInnerWidth+', winh='+wppaWindowInnerHeight,1);}
function wppaOvlShow(arg){wppaConsoleLog('wppaOvlShow',1);wppaFindWindowSize();jQuery('#weaver-final').removeClass('wvr-hide-bang');jQuery('#wppa-overlay-sp').css({left:(wppaWindowInnerWidth/2)-16,top:(wppaWindowInnerHeight/2)-16,visibility:'visible'});var href;if(parseInt(arg)==arg){if(arg!=-1){wppaOvlUrl=wppaOvlUrls[arg];wppaOvlTitle=wppaOvlTitles[arg];wppaOvlIdx=arg;}}
else{wppaOvlIdx=-1;wppaOvlUrl=arg.href;wppaOvlTitle=arg.title;var rel=arg.rel;var temp=rel.split('[');if(temp[1]){wppaOvlUrls=new Array();wppaOvlTitles=new Array();var setname=temp[1];var anchors=jQuery('a');var anchor;var i,j=0;wppaOvlIdx=-1;for(i=0;i<anchors.length;i++){anchor=anchors[i];if(anchor.rel){temp=anchor.rel.split("[");if(temp[0]=='wppa'&&temp[1]==setname){wppaOvlUrls[j]=anchor.href;wppaOvlTitles[j]=anchor.title;if(anchor.href==wppaOvlUrl)wppaOvlIdx=j;j++;}}}}
else{wppaOvlUrls=false;wppaOvlTitles=false;wppaOvlIdx=-1;}}
var photoId=wppaUrlToId(wppaOvlUrl);_bumpViewCount(photoId);var mw=250;wppaConsoleLog('ovlOpac='+wppaOvlOpacity,1);jQuery('#wppa-overlay-bg').fadeTo(300,wppaOvlOpacity);var lft=(wppaWindowInnerWidth/2-125)+'px';var ptp=(wppaWindowInnerHeight/2-125)+'px';wppaConsoleLog('lft='+lft+', ptp='+ptp,1);jQuery('#wppa-overlay-ic').css({left:lft,paddingTop:ptp});var txtcol=wppaOvlTheme=='black'?'#a7a7a7':'#272727';var qtxtcol=wppaOvlTheme=='black'?'#a7a7a7':'#575757';if(wppaOvlFontColor)txtcol=wppaOvlFontColor;var html='<div id="wppa-overlay-qt-txt"  style="position:absolute; right:16px; top:'+(wppaOvlPadTop-1)+'px; visibility:hidden; box-shadow:none; font-family:helvetica; font-weight:bold; font-size:14px; color:'+qtxtcol+'; cursor:pointer; " onclick="wppaOvlHide()" >'+wppaOvlCloseTxt+'&nbsp;&nbsp;</div>'+'<img id="wppa-overlay-qt-img"  src="'+wppaImageDirectory+'smallcross-'+wppaOvlTheme+'.gif'+'" style="position:absolute; right:0; top:'+wppaOvlPadTop+'px; visibility:hidden; box-shadow:none; cursor:pointer" onclick="wppaOvlHide()" >'+'<img id="wppa-overlay-img"'+' ontouchstart="wppaTouchStart(event, \'wppa-overlay-img\', -1);"  ontouchend="wppaTouchEnd(event);" ontouchmove="wppaTouchMove(event);" ontouchcancel="wppaTouchCancel(event);" '+' src="'+wppaOvlUrl+'" style="border-width:16px; border-style:solid; border-color:'+wppaOvlTheme+'; margin-bottom:-15px; max-width:'+mw+'px; visibility:hidden; box-shadow:none;" />'+'<div id="wppa-overlay-txt-container" style="padding:10px; background-color:'+wppaOvlTheme+'; color:'+txtcol+'; text-align:center; font-family:'+wppaOvlFontFamily+'; font-size: '+wppaOvlFontSize+'px; font-weight:'+wppaOvlFontWeight+'; line-height:'+wppaOvlLineHeight+'px; visibility:hidden; box-shadow:none;" ></div>';jQuery('#wppa-overlay-ic').html(html);setTimeout('wppaOvlShow2()',10);return false;}
function wppaUrlToId(url){var temp=url.split('/wppa/');if(temp.length==1)return 0;temp=temp[1];temp=temp.split('.');temp=temp[0].replace('/','');temp=temp.replace('/','');temp=temp.replace('/','');temp=temp.replace('/','');temp=temp.replace('/','');return temp;}
function wppaOvlShow2(){wppaConsoleLog('wppaOvlShow2',1);var img=document.getElementById('wppa-overlay-img');if(!img||!img.complete){setTimeout('wppaOvlShow2()',10);return;}
if(wppaOvlAnimSpeed!=0)
img.style.visibility='visible';setTimeout('wppaOvlShow3()',10);return false;}
function wppaOvlShow3(){wppaConsoleLog('wppaOvlShow3',1);jQuery('#wppa-overlay-sp').css({visibility:'hidden'});jQuery('#wppa-overlay-txt-container').html('<div id="wppa-overlay-txt"></div>');var speed=wppaOvlAnimSpeed;wppaOvlSize(speed);setTimeout('wppaOvlShow4()',speed+50);return false;}
function wppaOvlShow4(){wppaConsoleLog('wppaOvlShow4',1);var cw=document.getElementById('wppa-overlay-img').clientWidth;if(wppaOvlIdx!=-1){var vl='visibility:hidden;';var vr='visibility:hidden;';var ht='height:'+wppaOvlTxtHeight+'px;';if(wppaOvlIdx!=0)vl='visible';if(wppaOvlIdx!=(wppaOvlUrls.length-1))vr='visible';if(wppaOvlTxtHeight=='auto')ht='';var html='<img src="'+wppaImageDirectory+'prev-'+wppaOvlTheme+'.gif" style="position:relative; top:-8px; float:left; '+vl+'; box-shadow:none;" onclick="wppaOvlShowPrev()" / >'+'<img src="'+wppaImageDirectory+'next-'+wppaOvlTheme+'.gif" style="position:relative; top:-8px; float:right;'+vr+'; box-shadow:none;" onclick="wppaOvlShowNext()" / >'+'<div id="wppa-overlay-txt" style="text-align:center; min-height:36px; '+ht+' overflow:auto; box-shadow:none; width:'+(cw-80)+'px;" >';if(wppaOvlShowCounter)html+=(wppaOvlIdx+1)+'/'+wppaOvlUrls.length+'<br />';html+=wppaOvlTitle+'</div>';jQuery('#wppa-overlay-txt-container').html(html);wppaOvlIsSingle=false;}
else{jQuery('#wppa-overlay-txt-container').html('<div id="wppa-overlay-txt" style="text-align:center; margin-left:45px;" >'+wppaOvlTitle+'</div>');wppaOvlIsSingle=true;}
jQuery('#wppa-overlay-txt-container').css('visibility','visible');jQuery('#wppa-overlay-qt-txt').css({visibility:'visible'});jQuery('#wppa-overlay-qt-img').css({visibility:'visible'});if(wppaOvlFirst){if(document.onkeydown){wppaOvlKbHandler=document.onkeydown;}
document.onkeydown=wppaKbAction;if(window.onresize){wppaOvlSizeHandler=window.onresize;}
window.onresize=function(){return wppaOvlResize(10);}
wppaOvlFirst=false;}
if(wppaOvlTxtHeight=='auto')wppaOvlResize(10);return false;}
function wppaOvlShowPrev(){wppaConsoleLog('wppaOvlShowPrev',1);if(wppaOvlIsSingle)return false;if(wppaOvlIdx<1){wppaOvlHide();return false;}
wppaOvlShow(wppaOvlIdx-1);return false;}
function wppaOvlShowNext(){wppaConsoleLog('wppaOvlShowNext',1);if(wppaOvlIsSingle)return false;if(wppaOvlIdx>=(wppaOvlUrls.length-1)){wppaOvlHide();return false;}
wppaOvlShow(wppaOvlIdx+1);return false;}
function wppaOvlSize(speed){wppaConsoleLog('wppaOvlSize',1);if(!document.getElementById('wppa-overlay-txt')){setTimeout('wppaOvlSize('+speed+')',10);return;}
wppaFindWindowSize();var iw=wppaWindowInnerWidth;var ih=wppaWindowInnerHeight;var img=document.getElementById('wppa-overlay-img');var cw=img.clientWidth;var nw=img.naturalWidth;var nh=img.naturalHeight;var fakt1;var fakt2;var fakt;if(typeof(nw)=='undefined'){nw=img.clientWidth;nh=img.clientHeight;fakt1=(iw-100)/nw;fakt2=ih/nh;if(fakt1<fakt2)fakt=fakt1;else fakt=fakt2;if(true){nw=parseInt(nw*fakt);nh=parseInt(nh*fakt);}}
else{fakt1=(iw-100)/nw;fakt2=ih/nh;if(fakt1<fakt2)fakt=fakt1;else fakt=fakt2;if(fakt<1.0){nw=parseInt(nw*fakt);nh=parseInt(nh*fakt);}}
var mh;var tch=document.getElementById('wppa-overlay-txt').clientHeight;if(wppaOvlTxtHeight=='auto'){if(tch==0)tch=36;mh=ih-tch-52;}
else{mh=ih-wppaOvlTxtHeight-52;}
var mw=parseInt(mh*nw/nh);var pt=wppaOvlPadTop;var lft=parseInt((iw-mw)/2);var wid=mw;if(nh<mh){pt=wppaOvlPadTop+(mh-nh)/2;lft=parseInt((iw-nw)/2);wid=nw;}
var cwid=wid+32;lft-=16;if(speed==0){jQuery('#wppa-overlay-img').css({width:wid,maxWidth:wid,visibility:'visible'});jQuery('#wppa-overlay-ic').css({width:cwid,left:lft,paddingTop:pt});jQuery('#wppa-overlay-qt-txt').css({top:(pt-1)});jQuery('#wppa-overlay-qt-img').css({top:pt});}
else{jQuery('#wppa-overlay-img').stop().animate({width:wid,maxWidth:wid},speed);jQuery('#wppa-overlay-ic').stop().animate({width:cwid,left:lft,paddingTop:pt},speed);jQuery('#wppa-overlay-qt-txt').stop().animate({top:(pt-1)},speed);jQuery('#wppa-overlay-qt-img').stop().animate({top:pt},speed);}
if(document.getElementById('wppa-overlay-txt')){if(speed>10)jQuery('#wppa-overlay-txt').css({visibility:'hidden'});}
setTimeout('wppaOvlSize2()',speed+20);return true;}
function wppaOvlSize2(){wppaConsoleLog('wppaOvlSize2',1);var cw=document.getElementById('wppa-overlay-img').clientWidth;jQuery('#wppa-overlay-img').css({width:cw});jQuery('#wppa-overlay-ic').css({width:cw+32});jQuery('#wppa-overlay-txt').css({width:(cw-80)+'px',visibility:'visible'});return true;}
function wppaOvlHide(){wppaConsoleLog('wppaOvlHide',1);jQuery('#wppa-overlay-ic').html('');jQuery('#wppa-overlay-ic').css({paddingTop:0});jQuery('#wppa-overlay-bg').fadeOut(300);document.onkeydown=wppaOvlKbHandler;window.onresize=wppaOvlSizeHandler;wppaOvlFirst=true;}
function wppaOvlOnclick(event){switch(wppaOvlOnclickType){case'none':break;case'close':wppaOvlHide();break;case'browse':var x=event.screenX-window.screenX;if(x<wppaWindowInnerWidth/2)wppaOvlShowPrev();else wppaOvlShowNext();break;default:alert('Unimplemented action: '+wppaOvlOnclickType);break;}
return true;}
function wppaInitOverlay(){wppaConsoleLog('wppaInitOverlay',1);var anchors=jQuery('a');var anchor;var i;for(i=0;i<anchors.length;i++){anchor=anchors[i];if(anchor.rel){temp=anchor.rel.split("[");if(temp[0]=='wppa'){wppaWppaOverlayActivated=true;anchor.onclick=function(){return wppaOvlShow(this);}}}}}
var wppaKbAction=function(e){if(e==null){keycode=event.keyCode;escapeKey=27;}else{keycode=e.keyCode;escapeKey=27;}
key=String.fromCharCode(keycode).toLowerCase();if((key=='x')||(key=='o')||(key=='c')||(key=='q')||(keycode==escapeKey)){wppaOvlHide();}
else if((key=='p')||(keycode==37)){wppaOvlShowPrev();}else if((key=='n')||(keycode==39)){wppaOvlShowNext();}}
function wppaOvlResize(){wppaConsoleLog('wppaOvlResize',1);setTimeout('wppaOvlSize(10)',50);setTimeout('wppaOvlSize(10)',200);setTimeout('wppaOvlSize(10)',500);}
function wppaAjaxMakeOrigName(mocc,id){var xmlhttp=wppaGetXmlHttp();var url=wppaAjaxUrl+'?action=wppa&wppa-action=makeorigname&photo-id='+id+'&from=fsname';xmlhttp.open("GET",url,false);xmlhttp.send();if(xmlhttp.readyState==4&&xmlhttp.status==200){var result=xmlhttp.responseText.split('||');if(result[1]=='0'){if(wppaArtMonkyLink=='file')window.open(result[2]);if(wppaArtMonkyLink=='zip')document.location=result[2];return true;}
else{alert('Error: '+result[1]+'\n\n'+result[2]);return false;}}
else{alert('Comm error encountered');return false;}}
function wppaAjaxComment(mocc,id){if(!_wppaValidateComment(mocc))return;jQuery("#wppa-comment-spin-"+mocc).css('display','inline');var xmlhttp=wppaGetXmlHttp();var data='action=wppa&wppa-action=do-comment&photo-id='+id
+'&comname='+jQuery("#wppa-comname-"+mocc).attr('value')
+'&comment='+jQuery("#wppa-comment-"+mocc).attr('value')
+'&wppa-captcha='+jQuery("#wppa-captcha-"+mocc).attr('value')
+'&wppa-nonce='+jQuery("#wppa-nonce-"+mocc).attr('value')
+'&moccur='+mocc;if(typeof(jQuery("#wppa-comemail-"+mocc).attr('value'))!='undefined')data+='&comemail='+jQuery("#wppa-comemail-"+mocc).attr('value');if(typeof(jQuery("#wppa-comment-edit-"+mocc).attr('value'))!='undefined')data+='&comment-edit='+jQuery("#wppa-comment-edit-"+mocc).attr('value');xmlhttp.open('POST',wppaAjaxUrl,false);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send(data);if(xmlhttp.readyState==4&&xmlhttp.status==200){var result=xmlhttp.responseText;jQuery("#wppa-comments-"+mocc).html(result);_wppaCommentHtml[mocc][_wppaCurIdx[mocc]]=result;wppaOpenComments(mocc);}
else{alert('Comm error encountered');return false;}
jQuery("#wppa-comment-spin-"+mocc).css('display','none');}
function wppaConsoleLog(arg){if(typeof(console)!='undefined'&&wppaDebug){console.log(arg);}}
function wppaRepairScriptTags(text){var temp=text.split('[script');if(temp.length==1)return text;var newtext=temp[0];var idx=0;while(temp.length>idx){newtext+='<script';idx++;newtext+=temp[idx];}
temp=newtext.split('[/script');newtext=temp[0];idx=0;while(temp.length>idx){newtext+='</script';idx++;newtext+=temp[idx];}
return newtext;}
function wppaTrimAlt(text){var result;if(text.length>13){result=text.substr(0,10)+'...';}
else result=text;return result;}
function _wppaUpdateOgMeta(mocc){if(wppaIsMini[mocc])return;var metas=jQuery("meta");var i=0;while(i<metas.length){elm=metas[i];if(jQuery(elm).attr("property")=="og:image"){jQuery(elm).attr("content",_wppaUrl[mocc][_wppaCurIdx[mocc]]);}
if(jQuery(elm).attr("property")=="og:description"){jQuery(elm).attr("content",_wppaOgDsc[mocc][_wppaCurIdx[mocc]]);}
if(jQuery(elm).attr("property")=="og:title"){jQuery(elm).attr("content",_wppaNames[mocc][_wppaCurIdx[mocc]]);}
if(jQuery(elm).attr("property")=="og:url"){jQuery(elm).attr("content",wppaGetCurrentFullUrl(mocc,_wppaCurIdx[mocc]));}
i++;}}
function wppaFbInit(){if(FB){FB.init({status:true,xfbml:true});}
else{wppaConsoleLog('Fb wait');SetTimeout('wppaFbInit()',200);}}
function wppaInsertAtCursor(elm,value){if(document.selection){elm.focus();sel=document.selection.createRange();sel.text=value;}
else if(elm.selectionStart||elm.selectionStart=='0'){var startPos=elm.selectionStart;var endPos=elm.selectionEnd;elm.value=elm.value.substring(0,startPos)
+value
+elm.value.substring(endPos,elm.value.length);elm.selectionStart=startPos+value.length;elm.selectionEnd=startPos+value.length;}else{elm.value+=value;}}